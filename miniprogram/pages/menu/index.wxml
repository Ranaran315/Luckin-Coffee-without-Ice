<!--pages/order/index.wxml-->
<view class="container">
	<view class="header" style="{{headerStyle}}">
		<view class="pindan">
			<text>æ‹¼å•</text>
		</view>
		<view class="search">
			<icon class="icon" type="search"></icon>
			<input type="text" placeholder="2024å¿ƒæƒ³äº‹æˆğŸŠ" />
		</view>
	</view>
	<view class="center">
		<view class="left">
			<view class="store" wx:if="{{isSelf}}">
				<view class="store-name">
					<view class="name">{{store.name}}</view>
					<Icon name="jinqv"></Icon>
				</view>
				<view class="store-desc">{{store.desc}}</view>
			</view>
			<view class="address" wx:else>
				<view class="address-name">
					<view class="name">{{address.address}}</view>
					<Icon name="jinqv"></Icon>
				</view>
				<view class="meta">
					<view class="meta-item">{{address.phone}}</view>
					<view class="meta-item">{{address.name}}{{address.gender.name}}</view>
				</view>
			</view>
		</view>
		<view class="right">
			<SwitchTab value="{{isSelf}}" leftText="è‡ªæ" rightText="å¤–é€" bind:change="selectDeliveryType"></SwitchTab>
		</view>
	</view>
	<view class="main">
		<scroll-view class="left" scroll-y="true" scroll-into-view="left-item-{{currentCategoryIndex}}" scroll-with-animation="true" style="{{mainStyle}}">
			<block wx:for="{{categoryList}}" wx:key="id">
				<view id="left-item-{{index}}" class="left-item {{currentCategoryIndex == index ? 'selected' : ''}}" bind:tap="selectCategory" data-index="{{index}}" data-id="{{item.id}}" data-id="{{item.id}}">
					<view class="before"></view>
					{{item.name}}
				</view>
			</block>
		</scroll-view>
		<scroll-view id="coffee-scroll-view" scroll-into-view="right-item-{{currentCategoryId}}" class="right" scroll-y="true" bindscroll="handlerRightScroll">
			<block wx:for="{{dataList}}" wx:for-item="data" wx:key="id">
				<view class="right-item" id="right-item-{{data.id}}">
					<view class="header">
						<text class="title">{{data.name}}</text>
						<text class="desc">{{data.desc}}</text>
					</view>
					<block wx:for="{{data.coffeeList}}" wx:for-item="coffee" wx:key="id">
						<view class="coffee-item" bind:tap="checkCoffee" data-id="{{coffee.id}}">
							<image class="cover-image" src="{{coffee.coverImg}}" mode="aspectFill"></image>
							<view class="sale-info">
								<text class="title">{{coffee.name}}</text>
								<text class="desc">{{coffee.desc}}</text>
								<view class="price">
									<text class="price-sale">ï¿¥{{coffee.price_sale}}</text>
									<text class="price-face">(é¢ä»·<text style="text-decoration: line-through;">ï¿¥{{coffee.price_face}}</text>)</text>
								</view>
							</view>
							<image class="icon-add" src="../../images/icon_add.png" mode="aspectFill" />
						</view>
					</block>
				</view>
			</block>
		</scroll-view>
		<view class="cart {{cartIsShowing ? '' : 'hidden-cart'}}">
			<view class="cart-left" bind:tap="showCart">
				<image class="cart-icon" src="../../images/cart_icon.png" mode="aspectFill" />
				<view class="superscript">
					<view>{{goodsNumber}}</view>
				</view>
			</view>
			<view class="cart-center">
				<text style="display: flex;align-items: center;">
					<text>é¢„è®¡åˆ°æ‰‹</text>
					<text style="color: var(--color-04)">ï¿¥</text>
					<text style="color: var(--color-04);font-size: 1rem">{{price}}</text>
				</text>
				<text style="font-size: .7rem; color: var(--color-03);">å·²äº«å—æ›´ä½ä¼˜æƒ ï¼Œå…±å‡å…ï¿¥{{preferential}}</text>
			</view>
			<view class="cart-right">
				<view wx:if="{{goodsNumber > 0}}">å»ç»“ç®—</view>
				<view wx:else class="unable">ä¸å¯ç»“ç®—</view>
			</view>
		</view>
	</view>
</view>